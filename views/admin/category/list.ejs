<%- extend('../../master/admin/layout') %>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper" id="pageBody">
  <!-- Content Header (Page header) -->
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6"></div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active">Category List</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <!-- Main content -->
  <div class="content" style="" v-bind:style="{ display: showStatus }">
    <div class="container-fluid">
      <div class="row">
        <!-- /.col-md-6 -->
        <div class="col-lg-12" >
          <div class="card">
            <div class="card-header">
                <h5 class="m-0 float-left" v-on:click="showCategoryListSection">Add New Category</h5>
                <a href="#" v-on:click="showCategoryListSection" class="btn btn-primary float-right">Category List</a>
            </div>
            <div class="card-body">
                <form method="POST" v-on:submit.prevent="submitForm">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                            <label for="disabledTextInput">Select Parent Category</label>
                            <select 
                                name="parent_category" 
                                id="parent_category"
                                v-model="category.parent_category" 
                                class="form-control">
                                <option value="null">--Select--Parent--Category</option>
                                <option 
                                    v-for='category in parentCategories'
                                    :value='category._id'>{{category.name}}</option>
                            </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                            <label for="disabledTextInput">Name</label>
                            <input
                                type="text"
                                id="name"
                                name="name"
                                v-model="category.name"
                                class="form-control"
                                placeholder="Name"
                            />
                            </div>
                        </div>
                    </div>
                    <div class="row mb-10">
                        <div class="col-sm-12">
                            <div class="form-check">
                                <input type="checkbox" 
                                    class="form-check-input" 
                                    id="show-property" 
                                    v-on:click="showPropertyRow">

                                <label class="form-check-label" 
                                    for="exampleCheck1">Is feature is available?</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-10" id="property-div" v-if="propertiesSeen">
                        <div class="row mb-10">
                            <div class="col-sm-12">
                                <button type="button" 
                                    name="add-property" 
                                    id="add-property" 
                                    class="btn btn-success">Add New Property</button>
                            </div>
                        </div>
                        <div class="row mb-10">
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="disabledTextInput">Property Name</label>
                                    <input type="text" id="name" name="name" v-model="category.name" class="form-control" placeholder="Name" />
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label for="disabledTextInput">Property type</label>
                                    <select type="text" 
                                        name="property_type" 
                                        class="form-control">
                                        <option v-for="inputType in inputTypeOption">{{ inputType.label }}</option>
                                </select>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="disabledTextInput">Is required</label>
                                    <input style="margin-top: 40px;" 
                                        type="checkbox" 
                                        class="form-check-input" 
                                        id="exampleCheck1">
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <button type="button" style="margin-top: 30px;" class="btn btn-danger remove-property">Remove</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="disabledSelect">Description</label>
                                <textarea id="description" 
                                    v-model="category.description" 
                                    name="description" 
                                    class="form-control" 
                                    cols="10" rows="5"
                                    placeholder="Description"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="disabledSelect">Seo Content</label>
                                <textarea id="seo_content" v-model="category.seo_description" name="seo_description" class="form-control" cols="20" rows="5"
                                    placeholder="Seo Content"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="disabledSelect">Priroty</label>
                                <input type="number" 
                                    v-model="category.priority" 
                                    id="priority" 
                                    name="priority" 
                                    class="form-control"
                                    placeholder="Priority" />
                            </div>
                        </div>
                    </div>
                    <div class="row" v-if="response.status">
                        <div class="col-sm-12">
                            <p class="alert alert-success">{{response.msg}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <button type="submit" class="btn btn-primary">Submit</button>
                            <button type="button" v-on:click="reverseMessage" class="btn btn-primary">Test </button>
                        </div>
                    </div>
                </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="content" style="" v-bind:style="{ display: categoryListshowStatus }">
    <div class="container-fluid">
      <div class="row">
        <!-- /.col-md-6 -->
        <div class="col-lg-12">
          <div class="card">
            <div class="card-header">
              <h5 class="m-0 float-left">Category List</h5>
              <a href="#" v-on:click="showAddNewCategorySection" class="btn btn-primary float-right">Add New Category</a>
            </div>
            <div class="card-body">
                <table class="table table-bordered table-striped" id="categoryListTable">
                    <thead>
                        <tr>
                            <th>SN.</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /.content -->
</div>
<script>
$(document).ready(function () {
    $('#categoryListTable').DataTable({
        "pageLength": 5,
        "processing": true,
        "serverSide": true,
        "sScrollX": "100%",
        "sScrollXInner": "110%",
        "bScrollCollapse": true,
        "ajax": {
            "url": "/api/v1/category/category-list",
            "dataType": "json",
            "type": "GET",
           
        },
        "columns": [
                { "data": "sn" },
                { "data": "name" },
                { "data": "description" },
                { "data": "action" }
            /*    { data:'action',orderable:false},*/
        ],
        'columnDefs': [{
            'targets': [0], /* column index */
            'orderable': false, /* true or false */
        }]
    });
});
</script>
<script src="/customAssets/js/category.js"></script>


